{"version":3,"sources":["index.tsx"],"names":["React","View","Text","Animated","PanResponder","StyleSheet","Easing","VerticalSlider","Component","constructor","props","gestureState","min","max","step","height","ratio","dy","diff","Math","_moveStartValue","round","value","floor","ballIndicatorWidth","ballIndicatorHeight","renderIndicator","animationDuration","sliderHeight","_getSliderHeight","ballPosition","ballHeight","parallel","timing","state","toValue","easing","linear","duration","useNativeDriver","start","setState","panResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","_event","disabled","_fetchNewValueFromGesture","_changeState","onChange","onPanResponderRelease","onComplete","onPanResponderTerminationRequest","onPanResponderTerminate","Value","componentDidMount","shouldComponentUpdate","nextProps","nextState","render","width","borderRadius","maximumTrackTintColor","minimumTrackTintColor","showBallIndicator","ballIndicatorColor","ballIndicatorPosition","ballIndicatorTextColor","showBackgroundShadow","shadowProps","shadowOffsetWidth","shadowOffsetHeight","shadowOpacity","shadowRadius","elevation","shadowColor","shadowStyles","shadowOffset","styles","container","backgroundColor","panHandlers","slider","ball","bottom","left","ballText","color","position","alignItems","justifyContent","fontWeight","overflow"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  View,\n  Text,\n  Animated,\n  PanResponder,\n  StyleSheet,\n  Easing,\n  PanResponderInstance,\n  GestureResponderEvent,\n  PanResponderGestureState,\n} from 'react-native';\n\ninterface props {\n  value?: number;\n  disabled?: boolean;\n  min: number;\n  max: number;\n  onChange: (value: number) => void;\n  onComplete?: (value: number) => void;\n  width: number;\n  height: number;\n  borderRadius?: number;\n  maximumTrackTintColor?: string;\n  minimumTrackTintColor?: string;\n  showBallIndicator?: boolean;\n  step?: number;\n  ballIndicatorColor?: string;\n  ballIndicatorWidth?: number;\n  ballIndicatorHeight?: number;\n  ballIndicatorPosition?: number;\n  ballIndicatorTextColor?: string;\n  animationDuration?: number;\n  showBackgroundShadow?: boolean;\n  shadowProps?: {\n    shadowOffsetWidth?: number;\n    shadowOffsetHeight?: number;\n    shadowOpacity?: number;\n    shadowRadius?: number;\n    elevation?: number;\n    shadowColor?: string;\n  };\n  renderIndicator?: (value: number) => JSX.Element;\n}\n\ninterface state {\n  value: number;\n  sliderHeight: Animated.Value;\n  ballHeight: Animated.Value;\n  panResponder: PanResponderInstance;\n}\n\nexport default class VerticalSlider extends React.Component<props, state> {\n  _moveStartValue: number = 0;\n\n  constructor(props: props) {\n    super(props);\n\n    let panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: () => false,\n      onPanResponderGrant: () => {\n        this._moveStartValue = this.state.value;\n      },\n      onPanResponderMove: (\n        _event: GestureResponderEvent,\n        gestureState: PanResponderGestureState\n      ) => {\n        if (this.props.disabled) {\n          return;\n        }\n        const value = this._fetchNewValueFromGesture(gestureState);\n        this._changeState(value);\n        if (this.props.onChange) {\n          this.props.onChange(value);\n        }\n      },\n      onPanResponderRelease: (\n        _event: GestureResponderEvent,\n        gestureState: PanResponderGestureState\n      ) => {\n        if (this.props.disabled) {\n          return;\n        }\n        const value = this._fetchNewValueFromGesture(gestureState);\n        this._changeState(value);\n        if (this.props.onComplete) {\n          this.props.onComplete(value);\n        }\n      },\n      onPanResponderTerminationRequest: () => false,\n      onPanResponderTerminate: (\n        _event: GestureResponderEvent,\n        gestureState: PanResponderGestureState\n      ) => {\n        if (this.props.disabled) {\n          return;\n        }\n        const value = this._fetchNewValueFromGesture(gestureState);\n        this._changeState(value);\n        if (this.props.onComplete) {\n          this.props.onComplete(value);\n        }\n      },\n    });\n\n    this.state = {\n      value: props.value || props.min,\n      sliderHeight: new Animated.Value(0),\n      ballHeight: new Animated.Value(0),\n      panResponder,\n    };\n  }\n\n  _fetchNewValueFromGesture = (gestureState: any): number => {\n    const { min, max, step, height } = this.props;\n    const ratio = -gestureState.dy / height;\n    const diff = max - min;\n    if (step) {\n      return Math.max(\n        min,\n        Math.min(\n          max,\n          this._moveStartValue + Math.round((ratio * diff) / step) * step\n        )\n      );\n    }\n    let value = Math.max(min, this._moveStartValue + ratio * diff);\n    return Math.floor(value * 100) / 100;\n  };\n\n  _getSliderHeight = (value: number): number => {\n    const { min, max, height } = this.props;\n    return ((value - min) * height) / (max - min);\n  };\n\n  _changeState = (value: number): void => {\n    const {\n      height,\n      ballIndicatorWidth = 48,\n      ballIndicatorHeight = 48,\n      renderIndicator = null,\n      animationDuration,\n    } = this.props;\n    const sliderHeight = this._getSliderHeight(value);\n    let ballPosition = sliderHeight;\n    const ballHeight = renderIndicator\n      ? ballIndicatorHeight\n      : ballIndicatorWidth;\n    if (ballPosition + ballHeight >= height) {\n      ballPosition = height - ballHeight;\n    } else if (ballPosition - ballHeight <= 0) {\n      ballPosition = 0;\n    } else {\n      ballPosition = ballPosition - ballHeight / 2;\n    }\n    Animated.parallel([\n      Animated.timing(this.state.sliderHeight, {\n        toValue: sliderHeight,\n        easing: Easing.linear,\n        duration: animationDuration || 0,\n        useNativeDriver: false,\n      }),\n      Animated.timing(this.state.ballHeight, {\n        toValue: ballPosition,\n        easing: Easing.linear,\n        duration: animationDuration || 0,\n        useNativeDriver: false,\n      }),\n    ]).start();\n    this.setState({ value });\n  };\n\n  componentDidMount() {\n    const { value } = this.props;\n    if (value) {\n      this._changeState(value);\n    }\n  }\n\n  shouldComponentUpdate(nextProps: props, nextState: state) {\n    if (nextProps.value && nextProps.value !== nextState.value) {\n      this._changeState(nextProps.value);\n    }\n    return false;\n  }\n\n  render() {\n    const {\n      width = 350,\n      height = 30,\n      borderRadius = 5,\n      maximumTrackTintColor = '#3F2DA5',\n      minimumTrackTintColor = '#77ADE6',\n      showBallIndicator = false,\n      ballIndicatorColor = '#ECECEC',\n      ballIndicatorWidth = 48,\n      ballIndicatorHeight = 48,\n      ballIndicatorPosition = -60,\n      ballIndicatorTextColor = '#000000',\n      showBackgroundShadow = true,\n      shadowProps: {\n        shadowOffsetWidth = 0,\n        shadowOffsetHeight = 1,\n        shadowOpacity = 0.22,\n        shadowRadius = 2.22,\n        elevation = 3,\n        shadowColor = '#000',\n      } = {},\n      renderIndicator = null,\n    } = this.props;\n\n    const shadowStyles = {\n      shadowColor,\n      shadowOffset: {\n        width: shadowOffsetWidth,\n        height: shadowOffsetHeight,\n      },\n      shadowOpacity,\n      shadowRadius,\n      elevation,\n    };\n\n    const { value } = this.state;\n    return (\n      <View\n        style={[\n          showBackgroundShadow ? shadowStyles : {},\n          { height, width, borderRadius },\n        ]}\n      >\n        <View\n          style={[\n            styles.container,\n            {\n              height,\n              width,\n              borderRadius,\n              backgroundColor: maximumTrackTintColor,\n            },\n          ]}\n          {...this.state.panResponder.panHandlers}\n        >\n          <Animated.View\n            style={[\n              styles.slider,\n              {\n                height: this.state.sliderHeight,\n                width,\n                backgroundColor: minimumTrackTintColor,\n              },\n            ]}\n          />\n        </View>\n        {showBallIndicator ? (\n          <Animated.View\n            style={[\n              styles.ball,\n              showBackgroundShadow ? shadowStyles : {},\n              {\n                height: renderIndicator\n                  ? ballIndicatorHeight\n                  : ballIndicatorWidth,\n                bottom: this.state.ballHeight,\n                left: ballIndicatorPosition,\n                width: ballIndicatorWidth,\n              },\n              renderIndicator\n                ? {}\n                : {\n                    borderRadius: ballIndicatorWidth,\n                    backgroundColor: ballIndicatorColor,\n                  },\n            ]}\n          >\n            {renderIndicator ? (\n              renderIndicator(value)\n            ) : (\n              <Text\n                style={[\n                  styles.ballText,\n                  {\n                    color: ballIndicatorTextColor,\n                  },\n                ]}\n              >\n                {Math.round(value * 100) / 100}\n              </Text>\n            )}\n          </Animated.View>\n        ) : null}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  ball: {\n    position: 'absolute',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  ballText: {\n    fontWeight: '900',\n  },\n  container: {\n    overflow: 'hidden',\n  },\n  slider: {\n    position: 'absolute',\n    bottom: 0,\n  },\n});\n"]}